<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>scroll</title>
    <style>
        #container{
            width: 200px;
            height: 300px;
            border: 1px solid #f00;
        }
    </style>
</head>
<body>
  <div id="container">

  </div>
</body>

<script>
    var container = document.querySelector('#container');
    var cc= document.createElement('span');
    cc.innerText = "22222222";
    marquee(container,cc,"right");

    function marquee(box, content,direction,speed) {
        var content = content;
        var speed = speed||50;
        if(/HTML/.test(Object.prototype.toString.call(content))){
            content= dom2str(content);
        }
        var container = document.createElement('div');

        var div = document.createElement('div');
        div.innerHTML = content;
        div.style.height = box.offsetHeight + "px";
        div.style.width = box.offsetWidth + "px";
        container.appendChild(div);

        var div2 = document.createElement('div');
        div2.innerHTML = content;
        div2.style.height = box.offsetHeight + "px";
        div2.style.width = box.offsetWidth + "px";
        container.appendChild(div2);

        box.style.position = "relative";
        box.style.textAlign = "center";
        container.style.position = "absolute";
        box.appendChild(container);
        if(direction == "right" ||direction == "left"){
            container.style.width = "200%";
            div.style.width = "50%";
            div2.style.width = "50%";
            div.style.float = "left";
            div2.style.float = "left";
        }

        box.style.overflow = "hidden";
        var step = 0,maxHeight = box.offsetHeight,maxWidth = box.offsetWidth;
        container.style.left = 0;
        switch (direction){
            case "right":
                step = -maxWidth;
                !function temp() {
                    if(step >= 0){
                        step = -maxWidth;
                    }
                    container.style.left = step + "px";
                    step += 2;
                    setTimeout(temp,speed);//速度默认 2像素/100毫秒
                }();
                break;
            case "down":
                step = -maxHeight;
                !function temp() {
                    if(step >= 0){
                        step = -maxHeight;
                    }
                    container.style.top = step + "px";
                    step += 2;
                    setTimeout(temp,speed);//速度默认 2像素/100毫秒
                }();
                break;
            case "left":
                !function temp() {
                    if(step <= -maxWidth){
                        step = 0;
                    }
                    container.style.left = step + "px";
                    step -= 2;
                    setTimeout(temp,speed);//速度默认 2像素/100毫秒
                }();
                break;
            default:
                //向上
                !function temp() {
                    if(step <= -maxHeight){
                        step = 0;
                    }
                    container.style.top = step + "px";
                    step -= 2;
                    setTimeout(temp,speed);//速度默认 2像素/100毫秒
                }();
                break;
        }

        function dom2str(dom){
            var div= document.createElement("div");

            div.appendChild(dom);

            return div.innerHTML;
        }
    }
</script>
</html>